<link rel="stylesheet" href="/css/main_bar.css"> <header class="site-header header-normal">
    <div class="header-container">
        <a href="/handofhope/trangchu" class="logo-link">
            <img src="/images/logo2.png" alt="Logo Hands of Hope" class="logo-img" style=" border-radius: 30%;">
        </a>

        <nav class="main-nav">
            <a class="nav-link trangchu" href="/handofhope/trangchu"><b>Trang Chủ</b></a>
            <a class="nav-link gioithieu" href="/handofhope/gioi-thieu"><b>Giới thiệu</b></a>
            <a class="nav-link cachoancanh" href="/handofhope/hanh-trinh"><b>Hành Trình</b></a>
            <a class="nav-link lienhe" href="/handofhope/lien-he"><b>Liên hệ</b></a>
            <a class="nav-link quyengop" href="/handofhope/quyen-gop"><b>Quyên góp</b></a>
        </nav>

        <div class="header-actions">
            <% if (typeof user !== 'undefined' && user) { %>
                <div class="user-info" style="display: flex; align-items: center;">
                    <a href="/profile" style="display: flex; align-items: center; text-decoration: none; color: inherit; margin-right: 15px;">
                        
                        <span class="user-name" style="font-weight: bold;"><%= user.full_name || user.username %></span>&nbsp;&nbsp;
                        <% if (user.avatar_url) { %>
                            <img src="<%= user.avatar_url %>" alt="Avatar" style="width: 35px; height: 35px; border-radius: 50%; margin-right: 8px; object-fit: cover;">
                        <% } else { %>
                            <img src="/images/default-avatar.png" alt="Avatar" style="width: 35px; height: 35px; border-radius: 50%; margin-right: 8px; object-fit: cover;">
                        <% } %>
                    </a>

                    <% if (user.role === 'admin') { %>
                        <a href="/admin" class="nav-link admin-link" style="margin-right: 15px; font-weight: bold; color: #dc3545;" title="Trang Quản Trị">
                            <i class="fas fa-user-shield"></i> Quản trị
                        </a>
                    <% } %>
                    <a href="/logout" class="social-link logout-button" aria-label="Đăng xuất"> 
                        Đăng xuất
                    </a>
                </div>
            <% } else { %>
                <a href="https://www.facebook.com/quoc.le.trung.2025" class="social-link facebook-button" target="_blank" rel="noopener noreferrer" aria-label="Trang Facebook của chúng tôi">
                    </a>
                <a href="/login" class="social-link login-button" aria-label="Đăng nhập">
                    Đăng nhập
                </a>
            <% } %>
        </div>
    </div>
</header>

<script>
    // Function cho header scroll (giữ nguyên)
    document.addEventListener('DOMContentLoaded', function() {
        const header = document.querySelector('.site-header');
        if (!header) return;

        const scrollThreshold = 200;
        function updateHeaderOnScroll() {
            if (window.scrollY > scrollThreshold) {
                header.classList.remove('header-normal');
                header.classList.add('header-small');
            } else {
                header.classList.remove('header-small');
                header.classList.add('header-normal');
            }
        }
        window.addEventListener('scroll', updateHeaderOnScroll);
        updateHeaderOnScroll();
    });
    // Function active link (giữ nguyên)
    document.addEventListener('DOMContentLoaded', function() {
        const currentPath = window.location.pathname; // Lấy toàn bộ path, ví dụ: "/handofhope/trangchu"
        const navLinks = document.querySelectorAll('.main-nav .nav-link');

        navLinks.forEach(link => {
            link.classList.remove('active'); // Xóa class active khỏi tất cả các link trước
            const linkHref = link.getAttribute('href');
            if (linkHref === currentPath) {
                link.classList.add('active');
            }
        });
    });
</script>